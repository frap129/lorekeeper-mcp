============================= test session starts ==============================
platform linux -- Python 3.13.7, pytest-8.4.2, pluggy-1.6.0 -- /var/home/joe/Projects/ai/lorekeeper-mcp/.venv/bin/python3
cachedir: .pytest_cache
rootdir: /var/home/joe/Projects/ai/lorekeeper-mcp
configfile: pyproject.toml
testpaths: tests
plugins: anyio-4.11.0, asyncio-1.2.0, respx-0.22.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 400 items

tests/test_api_clients/test_base.py::test_make_request_success PASSED    [  0%]
tests/test_api_clients/test_base.py::test_make_request_404_error PASSED  [  0%]
tests/test_api_clients/test_base.py::test_make_request_timeout PASSED    [  0%]
tests/test_api_clients/test_base.py::test_make_request_with_params PASSED [  1%]
tests/test_api_clients/test_base.py::test_make_request_post PASSED       [  1%]
tests/test_api_clients/test_base.py::test_make_request_retries_on_timeout PASSED [  1%]
tests/test_api_clients/test_base.py::test_make_request_max_retries_exceeded PASSED [  1%]
tests/test_api_clients/test_base.py::test_make_request_returns_list PASSED [  2%]
tests/test_api_clients/test_base.py::test_client_close PASSED            [  2%]
tests/test_api_clients/test_dnd5e_api.py::test_get_rules_all PASSED      [  2%]
tests/test_api_clients/test_dnd5e_api.py::test_get_rules_by_section PASSED [  2%]
tests/test_api_clients/test_dnd5e_api.py::test_get_rule_sections_all PASSED [  3%]
tests/test_api_clients/test_dnd5e_api.py::test_get_rule_sections_by_name PASSED [  3%]
tests/test_api_clients/test_dnd5e_api.py::test_get_damage_types PASSED   [  3%]
tests/test_api_clients/test_dnd5e_api.py::test_get_weapon_properties PASSED [  3%]
tests/test_api_clients/test_dnd5e_api.py::test_get_skills PASSED         [  4%]
tests/test_api_clients/test_dnd5e_api.py::test_get_ability_scores PASSED [  4%]
tests/test_api_clients/test_dnd5e_api.py::test_get_magic_schools PASSED  [  4%]
tests/test_api_clients/test_dnd5e_api.py::test_get_languages PASSED      [  4%]
tests/test_api_clients/test_dnd5e_api.py::test_get_proficiencies PASSED  [  5%]
tests/test_api_clients/test_dnd5e_api.py::test_get_alignments PASSED     [  5%]
tests/test_api_clients/test_dnd5e_api.py::test_get_rules_api_error PASSED [  5%]
tests/test_api_clients/test_dnd5e_api.py::test_get_rules_network_error PASSED [  5%]
tests/test_api_clients/test_dnd5e_api.py::test_get_backgrounds_dnd5e PASSED [  6%]
tests/test_api_clients/test_dnd5e_api.py::test_get_classes_dnd5e PASSED  [  6%]
tests/test_api_clients/test_dnd5e_api.py::test_get_subclasses PASSED     [  6%]
tests/test_api_clients/test_dnd5e_api.py::test_get_races_dnd5e PASSED    [  6%]
tests/test_api_clients/test_dnd5e_api.py::test_get_subraces PASSED       [  7%]
tests/test_api_clients/test_dnd5e_api.py::test_get_feats_dnd5e PASSED    [  7%]
tests/test_api_clients/test_dnd5e_api.py::test_get_traits PASSED         [  7%]
tests/test_api_clients/test_dnd5e_api.py::test_get_equipment PASSED      [  7%]
tests/test_api_clients/test_dnd5e_api.py::test_get_equipment_categories PASSED [  8%]
tests/test_api_clients/test_dnd5e_api.py::test_get_magic_items_dnd5e PASSED [  8%]
tests/test_api_clients/test_dnd5e_api.py::test_get_spells_dnd5e PASSED   [  8%]
tests/test_api_clients/test_dnd5e_api.py::test_get_monsters_dnd5e PASSED [  8%]
tests/test_api_clients/test_dnd5e_api.py::test_get_conditions_dnd5e PASSED [  9%]
tests/test_api_clients/test_dnd5e_api.py::test_get_features PASSED       [  9%]
tests/test_api_clients/test_dnd5e_api.py::test_get_weapons PASSED        [  9%]
tests/test_api_clients/test_dnd5e_api.py::test_get_armor PASSED          [  9%]
tests/test_api_clients/test_dnd5e_api.py::test_get_armor_filters_equipment_correctly PASSED [ 10%]
tests/test_api_clients/test_dnd5e_api.py::test_get_weapons_filters_equipment_correctly PASSED [ 10%]
tests/test_api_clients/test_exceptions.py::test_exception_hierarchy PASSED [ 10%]
tests/test_api_clients/test_exceptions.py::test_network_error_creation PASSED [ 10%]
tests/test_api_clients/test_exceptions.py::test_api_error_with_status_code PASSED [ 11%]
tests/test_api_clients/test_exceptions.py::test_parse_error_with_raw_data PASSED [ 11%]
tests/test_api_clients/test_exceptions.py::test_cache_error_is_non_fatal PASSED [ 11%]
tests/test_api_clients/test_factory.py::test_create_open5e_v1_client PASSED [ 11%]
tests/test_api_clients/test_factory.py::test_create_open5e_v2_client PASSED [ 12%]
tests/test_api_clients/test_factory.py::test_factory_with_custom_timeout PASSED [ 12%]
tests/test_api_clients/test_factory.py::test_factory_clients_are_independent PASSED [ 12%]
tests/test_api_clients/test_factory.py::test_create_dnd5e_api PASSED     [ 12%]
tests/test_api_clients/test_models.py::test_base_model_required_fields PASSED [ 13%]
tests/test_api_clients/test_models.py::test_base_model_optional_fields PASSED [ 13%]
tests/test_api_clients/test_models.py::test_base_model_missing_required_field PASSED [ 13%]
tests/test_api_clients/test_models.py::test_base_model_to_dict PASSED    [ 13%]
tests/test_api_clients/test_models.py::test_spell_model_minimal PASSED   [ 14%]
tests/test_api_clients/test_models.py::test_spell_model_full PASSED      [ 14%]
tests/test_api_clients/test_models.py::test_spell_cantrip PASSED         [ 14%]
tests/test_api_clients/test_models.py::test_monster_model_minimal PASSED [ 14%]
tests/test_api_clients/test_models.py::test_monster_model_with_stats PASSED [ 15%]
tests/test_api_clients/test_models.py::test_monster_model_invalid_stats PASSED [ 15%]
tests/test_api_clients/test_models.py::test_armor_model PASSED           [ 15%]
tests/test_api_clients/test_models.py::test_weapon_model_real_api_dagger PASSED [ 15%]
tests/test_api_clients/test_models.py::test_weapon_model_greatsword PASSED [ 16%]
tests/test_api_clients/test_models.py::test_weapon_with_versatile_property PASSED [ 16%]
tests/test_api_clients/test_models.py::test_weapon_with_mastery_property PASSED [ 16%]
tests/test_api_clients/test_models.py::test_weapon_with_empty_properties PASSED [ 16%]
tests/test_api_clients/test_models.py::test_monster_allows_ability_scores_above_30 PASSED [ 17%]
tests/test_api_clients/test_models.py::test_monster_allows_extremely_high_ability_scores PASSED [ 17%]
tests/test_api_clients/test_open5e_v1.py::test_get_monsters PASSED       [ 17%]
tests/test_api_clients/test_open5e_v1.py::test_get_monsters_by_cr PASSED [ 17%]
tests/test_api_clients/test_open5e_v1.py::test_get_magic_items PASSED    [ 18%]
tests/test_api_clients/test_open5e_v1.py::test_get_magic_items_by_rarity PASSED [ 18%]
tests/test_api_clients/test_open5e_v1.py::test_get_planes PASSED         [ 18%]
tests/test_api_clients/test_open5e_v1.py::test_get_sections PASSED       [ 18%]
tests/test_api_clients/test_open5e_v1.py::test_get_sections_by_parent PASSED [ 19%]
tests/test_api_clients/test_open5e_v1.py::test_get_magic_items_by_type PASSED [ 19%]
tests/test_api_clients/test_open5e_v1.py::test_get_magic_items_by_attunement PASSED [ 19%]
tests/test_api_clients/test_open5e_v1.py::test_get_magic_items_multiple_filters PASSED [ 19%]
tests/test_api_clients/test_open5e_v1.py::test_get_spell_list PASSED     [ 20%]
tests/test_api_clients/test_open5e_v1.py::test_get_spell_list_by_class PASSED [ 20%]
tests/test_api_clients/test_open5e_v1.py::test_get_manifest PASSED       [ 20%]
tests/test_api_clients/test_open5e_v2.py::test_get_spells_basic PASSED   [ 20%]
tests/test_api_clients/test_open5e_v2.py::test_get_spells_with_filters PASSED [ 21%]
tests/test_api_clients/test_open5e_v2.py::test_get_weapons PASSED        [ 21%]
tests/test_api_clients/test_open5e_v2.py::test_get_armor PASSED          [ 21%]
tests/test_api_clients/test_open5e_v2.py::test_school_server_side_filtering PASSED [ 21%]
tests/test_api_clients/test_open5e_v2.py::test_no_client_side_filtering PASSED [ 22%]
tests/test_api_clients/test_open5e_v2.py::test_get_items PASSED          [ 22%]
tests/test_api_clients/test_open5e_v2.py::test_get_item_sets PASSED      [ 22%]
tests/test_api_clients/test_open5e_v2.py::test_get_item_categories PASSED [ 22%]
tests/test_api_clients/test_open5e_v2.py::test_get_creatures_transforms_v2_response_to_monster_model PASSED [ 23%]
tests/test_api_clients/test_open5e_v2.py::test_get_creatures_handles_missing_optional_fields PASSED [ 23%]
tests/test_api_clients/test_open5e_v2.py::test_get_creature_types PASSED [ 23%]
tests/test_api_clients/test_open5e_v2.py::test_get_creature_sets PASSED  [ 23%]
tests/test_api_clients/test_open5e_v2.py::test_get_damage_types_v2 PASSED [ 24%]
tests/test_api_clients/test_open5e_v2.py::test_get_languages_v2 PASSED   [ 24%]
tests/test_api_clients/test_open5e_v2.py::test_get_alignments_v2 PASSED  [ 24%]
tests/test_api_clients/test_open5e_v2.py::test_get_spell_schools_v2 PASSED [ 24%]
tests/test_api_clients/test_open5e_v2.py::test_get_sizes PASSED          [ 25%]
tests/test_api_clients/test_open5e_v2.py::test_get_item_rarities PASSED  [ 25%]
tests/test_api_clients/test_open5e_v2.py::test_get_environments PASSED   [ 25%]
tests/test_api_clients/test_open5e_v2.py::test_get_abilities PASSED      [ 25%]
tests/test_api_clients/test_open5e_v2.py::test_get_skills_v2 PASSED      [ 26%]
tests/test_api_clients/test_open5e_v2.py::test_get_species PASSED        [ 26%]
tests/test_api_clients/test_open5e_v2.py::test_get_classes_v2 PASSED     [ 26%]
tests/test_api_clients/test_open5e_v2.py::test_get_rules_v2 PASSED       [ 26%]
tests/test_api_clients/test_open5e_v2.py::test_get_rulesets PASSED       [ 27%]
tests/test_api_clients/test_open5e_v2.py::test_get_documents PASSED      [ 27%]
tests/test_api_clients/test_open5e_v2.py::test_get_licenses PASSED       [ 27%]
tests/test_api_clients/test_open5e_v2.py::test_get_publishers PASSED     [ 27%]
tests/test_api_clients/test_open5e_v2.py::test_get_game_systems PASSED   [ 28%]
tests/test_api_clients/test_open5e_v2.py::test_get_images PASSED         [ 28%]
tests/test_api_clients/test_open5e_v2.py::test_get_weapon_properties_v2 PASSED [ 28%]
tests/test_api_clients/test_open5e_v2.py::test_get_services PASSED       [ 28%]
tests/test_api_clients/test_open5e_v2.py::test_name_icontains_usage PASSED [ 29%]
tests/test_api_clients/test_open5e_v2.py::test_partial_name_match PASSED [ 29%]
tests/test_api_clients/test_open5e_v2.py::test_level_range_filtering PASSED [ 29%]
tests/test_api_clients/test_open5e_v2.py::test_level_range_filtering_lte PASSED [ 29%]
tests/test_api_clients/test_open5e_v2.py::test_cr_range_filtering PASSED [ 30%]
tests/test_api_clients/test_open5e_v2.py::test_cr_range_filtering_lte PASSED [ 30%]
tests/test_api_clients/test_open5e_v2.py::test_cost_range_filtering PASSED [ 30%]
tests/test_api_clients/test_open5e_v2.py::test_cost_range_filtering_lte PASSED [ 30%]
tests/test_api_clients/test_open5e_v2.py::test_unified_search_method PASSED [ 31%]
tests/test_api_clients/test_open5e_v2.py::test_fuzzy_parameter PASSED    [ 31%]
tests/test_api_clients/test_open5e_v2.py::test_vector_parameter PASSED   [ 31%]
tests/test_api_clients/test_open5e_v2.py::test_object_model_filter PASSED [ 31%]
tests/test_api_clients/test_refactor_no_cache.py::test_make_request_no_cache_parameters PASSED [ 32%]
tests/test_api_clients/test_refactor_no_cache.py::test_make_request_simple_signature PASSED [ 32%]
tests/test_api_clients/test_refactor_no_cache.py::test_no_cache_methods_in_client PASSED [ 32%]
tests/test_cache/test_db.py::test_init_db_creates_schema PASSED          [ 32%]
tests/test_cache/test_db.py::test_get_cached_returns_none_for_missing_key PASSED [ 33%]
tests/test_cache/test_db.py::test_get_cached_returns_none_for_expired_entry PASSED [ 33%]
tests/test_cache/test_db.py::test_get_cached_returns_valid_entry PASSED  [ 33%]
tests/test_cache/test_db.py::test_set_cached_stores_data PASSED          [ 33%]
tests/test_cache/test_db.py::test_set_cached_overwrites_existing PASSED  [ 34%]
tests/test_cache/test_db.py::test_cleanup_expired_removes_old_entries PASSED [ 34%]
tests/test_cache/test_db.py::test_bulk_cache_entities_inserts_new PASSED [ 34%]
tests/test_cache/test_db.py::test_get_cached_entity_retrieves_by_slug PASSED [ 34%]
tests/test_cache/test_db.py::test_get_cached_entity_returns_none_for_missing PASSED [ 35%]
tests/test_cache/test_db.py::test_bulk_cache_entities_handles_upsert PASSED [ 35%]
tests/test_cache/test_db.py::test_bulk_cache_entities_extracts_indexed_fields PASSED [ 35%]
tests/test_cache/test_db.py::test_query_cached_entities_returns_all PASSED [ 35%]
tests/test_cache/test_db.py::test_query_cached_entities_filters_by_single_field PASSED [ 36%]
tests/test_cache/test_db.py::test_query_cached_entities_filters_by_multiple_fields PASSED [ 36%]
tests/test_cache/test_db.py::test_query_cached_entities_returns_empty_for_no_matches PASSED [ 36%]
tests/test_cache/test_db.py::test_query_cached_entities_rejects_invalid_filter_keys PASSED [ 36%]
tests/test_cache/test_db.py::test_query_cached_entities_rejects_sql_injection_in_filter_key PASSED [ 37%]
tests/test_cache/test_db.py::test_query_cached_entities_accepts_valid_filter_keys PASSED [ 37%]
tests/test_cache/test_db.py::test_get_entity_count_returns_count PASSED  [ 37%]
tests/test_cache/test_db.py::test_get_entity_count_returns_zero_for_empty PASSED [ 37%]
tests/test_cache/test_db.py::test_get_entity_count_handles_nonexistent_table PASSED [ 38%]
tests/test_cache/test_db.py::test_get_cache_stats_returns_complete_stats PASSED [ 38%]
tests/test_cache/test_protocol.py::test_cache_protocol_has_required_methods PASSED [ 38%]
tests/test_cache/test_protocol.py::test_cache_protocol_get_entities_signature PASSED [ 38%]
tests/test_cache/test_protocol.py::test_cache_protocol_store_entities_signature PASSED [ 39%]
tests/test_cache/test_protocol.py::test_cache_protocol_structural_typing PASSED [ 39%]
tests/test_cache/test_protocol.py::test_cache_protocol_has_docstrings PASSED [ 39%]
tests/test_cache/test_schema.py::test_schema_version_exists PASSED       [ 39%]
tests/test_cache/test_schema.py::test_entity_types_defined PASSED        [ 40%]
tests/test_cache/test_schema.py::test_get_table_name PASSED              [ 40%]
tests/test_cache/test_schema.py::test_get_create_table_sql_for_spells PASSED [ 40%]
tests/test_cache/test_schema.py::test_get_create_table_sql_for_monsters PASSED [ 40%]
tests/test_cache/test_schema.py::test_get_create_table_sql_with_empty_indexed_fields PASSED [ 41%]
tests/test_cache/test_schema.py::test_init_entity_cache_creates_tables PASSED [ 41%]
tests/test_cache/test_schema.py::test_init_entity_cache_creates_indexes PASSED [ 41%]
tests/test_cache/test_schema.py::test_init_entity_cache_enables_wal_mode PASSED [ 41%]
tests/test_cache/test_schema.py::test_get_index_sql PASSED               [ 42%]
tests/test_cache/test_sqlite.py::test_sqlite_cache_stores_entities PASSED [ 42%]
tests/test_cache/test_sqlite.py::test_sqlite_cache_retrieves_all_entities PASSED [ 42%]
tests/test_cache/test_sqlite.py::test_sqlite_cache_filters_entities PASSED [ 42%]
tests/test_cache/test_sqlite.py::test_sqlite_cache_returns_empty_list_for_no_matches PASSED [ 43%]
tests/test_cache/test_sqlite.py::test_sqlite_cache_raises_on_invalid_entity_type PASSED [ 43%]
tests/test_cache/test_sqlite.py::test_sqlite_cache_raises_on_empty_entities PASSED [ 43%]
tests/test_cache/test_sqlite.py::test_sqlite_cache_accepts_custom_db_path PASSED [ 43%]
tests/test_config.py::TestSettings::test_settings_loads_defaults PASSED  [ 44%]
tests/test_config.py::TestSettings::test_settings_respects_env_vars PASSED [ 44%]
tests/test_fixtures.py::test_live_db_creates_temp_database PASSED        [ 44%]
tests/test_fixtures.py::test_rate_limiter_tracks_calls PASSED            [ 44%]
tests/test_fixtures.py::test_rate_limiter_separate_per_api PASSED        [ 45%]
tests/test_fixtures.py::test_cache_stats_fixture_provided PASSED         [ 45%]
tests/test_fixtures.py::test_cache_stats_record_hit PASSED               [ 45%]
tests/test_fixtures.py::test_cache_stats_record_miss PASSED              [ 45%]
tests/test_fixtures.py::test_cache_stats_reset PASSED                    [ 46%]
tests/test_fixtures.py::test_clear_cache_fixture_works PASSED            [ 46%]
tests/test_project_structure.py::TestProjectStructure::test_source_directories_exist PASSED [ 46%]
tests/test_project_structure.py::TestProjectStructure::test_source_init_files_exist PASSED [ 46%]
tests/test_project_structure.py::TestProjectStructure::test_test_directories_exist PASSED [ 47%]
tests/test_project_structure.py::TestProjectStructure::test_test_init_files_exist PASSED [ 47%]
tests/test_project_structure.py::TestProjectStructure::test_data_directory_exists PASSED [ 47%]
tests/test_project_structure.py::TestProjectStructure::test_gitignore_content PASSED [ 47%]
tests/test_repositories/test_base.py::test_repository_protocol_get_all PASSED [ 48%]
tests/test_repositories/test_base.py::test_repository_protocol_search PASSED [ 48%]
tests/test_repositories/test_base.py::test_repository_is_generic PASSED  [ 48%]
tests/test_repositories/test_character_option.py::test_character_option_repository_search_classes PASSED [ 48%]
tests/test_repositories/test_character_option.py::test_character_option_repository_search_races PASSED [ 49%]
tests/test_repositories/test_character_option.py::test_character_option_repository_search_backgrounds PASSED [ 49%]
tests/test_repositories/test_character_option.py::test_character_option_repository_search_feats PASSED [ 49%]
tests/test_repositories/test_character_option.py::test_character_option_repository_search_conditions PASSED [ 49%]
tests/test_repositories/test_equipment.py::test_equipment_repository_get_weapons_from_cache PASSED [ 50%]
tests/test_repositories/test_equipment.py::test_equipment_repository_get_weapons_cache_miss PASSED [ 50%]
tests/test_repositories/test_equipment.py::test_equipment_repository_get_armor_from_cache PASSED [ 50%]
tests/test_repositories/test_equipment.py::test_equipment_repository_get_armor_cache_miss PASSED [ 50%]
tests/test_repositories/test_equipment.py::test_equipment_repository_search_weapons PASSED [ 51%]
tests/test_repositories/test_equipment.py::test_equipment_repository_search_armor PASSED [ 51%]
tests/test_repositories/test_equipment.py::test_equipment_repository_search_weapons_cache_miss PASSED [ 51%]
tests/test_repositories/test_equipment.py::test_equipment_repository_search_armor_cache_miss PASSED [ 51%]
tests/test_repositories/test_equipment.py::test_equipment_repository_search_empty_result PASSED [ 52%]
tests/test_repositories/test_equipment.py::test_equipment_repository_get_all_weapons_and_armor PASSED [ 52%]
tests/test_repositories/test_equipment.py::test_equipment_repository_get_all_mixed_cache PASSED [ 52%]
tests/test_repositories/test_factory.py::test_factory_create_spell_repository PASSED [ 52%]
tests/test_repositories/test_factory.py::test_factory_create_spell_repository_with_overrides PASSED [ 53%]
tests/test_repositories/test_factory.py::test_factory_create_monster_repository PASSED [ 53%]
tests/test_repositories/test_factory.py::test_factory_create_monster_repository_with_overrides PASSED [ 53%]
tests/test_repositories/test_factory.py::test_factory_create_equipment_repository PASSED [ 53%]
tests/test_repositories/test_factory.py::test_factory_create_equipment_repository_with_overrides PASSED [ 54%]
tests/test_repositories/test_factory.py::test_factory_create_character_option_repository PASSED [ 54%]
tests/test_repositories/test_factory.py::test_factory_create_character_option_repository_with_overrides PASSED [ 54%]
tests/test_repositories/test_factory.py::test_factory_create_rule_repository PASSED [ 54%]
tests/test_repositories/test_factory.py::test_factory_create_rule_repository_with_overrides PASSED [ 55%]
tests/test_repositories/test_factory.py::test_factory_creates_shared_cache_by_default PASSED [ 55%]
tests/test_repositories/test_factory.py::test_factory_all_repositories_created_successfully PASSED [ 55%]
tests/test_repositories/test_factory.py::test_create_monster_repository_default_uses_v2 PASSED [ 55%]
tests/test_repositories/test_monster.py::test_monster_repository_get_all_from_cache PASSED [ 56%]
tests/test_repositories/test_monster.py::test_monster_repository_get_all_cache_miss PASSED [ 56%]
tests/test_repositories/test_monster.py::test_monster_repository_search_by_type PASSED [ 56%]
tests/test_repositories/test_monster.py::test_monster_repository_search_by_size PASSED [ 56%]
tests/test_repositories/test_monster.py::test_monster_repository_search_cache_miss_with_filters PASSED [ 57%]
tests/test_repositories/test_monster.py::test_monster_repository_search_by_challenge_rating PASSED [ 57%]
tests/test_repositories/test_monster.py::test_monster_repository_search_multiple_filters PASSED [ 57%]
tests/test_repositories/test_monster.py::test_monster_repository_search_no_filters_returns_all PASSED [ 57%]
tests/test_repositories/test_monster.py::test_monster_repository_search_empty_result PASSED [ 58%]
tests/test_repositories/test_monster.py::test_monster_repository_cache_aside_pattern PASSED [ 58%]
tests/test_repositories/test_monster.py::test_monster_repository_uses_creatures_table_and_get_creatures PASSED [ 58%]
tests/test_repositories/test_monster.py::test_monster_repository_search_uses_creatures_table_and_get_creatures PASSED [ 58%]
tests/test_repositories/test_monster.py::test_repository_maps_v2_challenge_rating_params PASSED [ 59%]
tests/test_repositories/test_rule.py::test_rule_repository_search_rules PASSED [ 59%]
tests/test_repositories/test_rule.py::test_rule_repository_search_damage_types PASSED [ 59%]
tests/test_repositories/test_rule.py::test_rule_repository_search_skills PASSED [ 59%]
tests/test_repositories/test_spell.py::test_spell_repository_get_all_from_cache PASSED [ 60%]
tests/test_repositories/test_spell.py::test_spell_repository_get_all_cache_miss PASSED [ 60%]
tests/test_repositories/test_spell.py::test_spell_repository_search_by_level PASSED [ 60%]
tests/test_repositories/test_spell.py::test_spell_repository_search_by_school PASSED [ 60%]
tests/test_repositories/test_spell.py::test_spell_repository_search_cache_miss_with_filters PASSED [ 61%]
tests/test_repositories/test_spell.py::test_spell_repository_search_multiple_filters PASSED [ 61%]
tests/test_repositories/test_spell.py::test_spell_repository_search_no_filters_returns_all PASSED [ 61%]
tests/test_repositories/test_spell.py::test_spell_repository_search_empty_result PASSED [ 61%]
tests/test_repositories/test_spell.py::test_spell_repository_cache_aside_pattern PASSED [ 62%]
tests/test_repositories/test_spell.py::test_repository_parameter_mapping_with_open5e_client PASSED [ 62%]
tests/test_repositories/test_spell.py::test_repository_parameter_mapping_with_dnd5e_client PASSED [ 62%]
tests/test_repositories/test_spell.py::test_open5e_operator_mapping PASSED [ 62%]
tests/test_repositories/test_spell.py::test_dnd5e_parameter_mapping PASSED [ 63%]
tests/test_repositories/test_spell.py::test_repository_passthrough_exact_matches PASSED [ 63%]
tests/test_repositories/test_spell.py::test_repository_mixed_parameters PASSED [ 63%]
tests/test_server.py::test_server_instance_exists PASSED                 [ 63%]
tests/test_server.py::test_server_exports_from_package PASSED            [ 64%]
tests/test_tools/test_character_option_lookup.py::test_lookup_class_with_repository PASSED [ 64%]
tests/test_tools/test_character_option_lookup.py::test_lookup_race_with_repository PASSED [ 64%]
tests/test_tools/test_character_option_lookup.py::test_lookup_background_with_repository PASSED [ 64%]
tests/test_tools/test_character_option_lookup.py::test_lookup_feat_with_repository PASSED [ 65%]
tests/test_tools/test_character_option_lookup.py::test_lookup_invalid_type PASSED [ 65%]
tests/test_tools/test_character_option_lookup.py::test_lookup_character_option_with_limit PASSED [ 65%]
tests/test_tools/test_character_option_lookup.py::test_lookup_character_option_empty_results PASSED [ 65%]
tests/test_tools/test_character_option_lookup.py::test_lookup_character_option_api_error PASSED [ 66%]
tests/test_tools/test_character_option_lookup.py::test_lookup_character_option_network_error PASSED [ 66%]
tests/test_tools/test_character_option_lookup.py::test_lookup_character_option_no_repository_parameter PASSED [ 66%]
tests/test_tools/test_creature_lookup.py::test_lookup_creature_by_name PASSED [ 66%]
tests/test_tools/test_creature_lookup.py::test_lookup_creature_by_cr_and_type PASSED [ 67%]
tests/test_tools/test_creature_lookup.py::test_lookup_creature_fractional_cr PASSED [ 67%]
tests/test_tools/test_creature_lookup.py::test_lookup_creature_cr_range PASSED [ 67%]
tests/test_tools/test_creature_lookup.py::test_lookup_creature_empty_results PASSED [ 67%]
tests/test_tools/test_creature_lookup.py::test_lookup_creature_api_error PASSED [ 68%]
tests/test_tools/test_creature_lookup.py::test_lookup_creature_network_error PASSED [ 68%]
tests/test_tools/test_creature_lookup.py::test_creature_search_by_name_client_side PASSED [ 68%]
tests/test_tools/test_creature_lookup.py::test_lookup_creature_limit_applied PASSED [ 68%]
tests/test_tools/test_creature_lookup.py::test_lookup_creature_default_repository PASSED [ 69%]
tests/test_tools/test_creature_lookup.py::test_lookup_creature_armor_class_min PASSED [ 69%]
tests/test_tools/test_creature_lookup.py::test_lookup_creature_hit_points_min PASSED [ 69%]
tests/test_tools/test_creature_lookup.py::test_lookup_creature_combined_filters PASSED [ 69%]
tests/test_tools/test_creature_lookup.py::test_lookup_creature_backward_compatible PASSED [ 70%]
tests/test_tools/test_end_to_end.py::test_full_spell_lookup_workflow PASSED [ 70%]
tests/test_tools/test_end_to_end.py::test_full_creature_lookup_workflow PASSED [ 70%]
tests/test_tools/test_end_to_end.py::test_all_tools_callable PASSED      [ 70%]
tests/test_tools/test_end_to_end.py::test_character_option_lookup_workflow PASSED [ 71%]
tests/test_tools/test_end_to_end.py::test_equipment_lookup_workflow PASSED [ 71%]
tests/test_tools/test_end_to_end.py::test_rule_lookup_workflow PASSED    [ 71%]
tests/test_tools/test_equipment_lookup.py::test_lookup_weapon PASSED     [ 71%]
tests/test_tools/test_equipment_lookup.py::test_lookup_armor PASSED      [ 72%]
tests/test_tools/test_equipment_lookup.py::test_lookup_simple_weapons PASSED [ 72%]
tests/test_tools/test_equipment_lookup.py::test_lookup_armor_by_category PASSED [ 72%]
tests/test_tools/test_equipment_lookup.py::test_lookup_equipment_api_error PASSED [ 72%]
tests/test_tools/test_equipment_lookup.py::test_lookup_equipment_network_error PASSED [ 73%]
tests/test_tools/test_equipment_lookup.py::test_equipment_search_by_name_client_side PASSED [ 73%]
tests/test_tools/test_equipment_lookup.py::test_lookup_equipment_limit_applied PASSED [ 73%]
tests/test_tools/test_equipment_lookup.py::test_lookup_equipment_default_repository PASSED [ 73%]
tests/test_tools/test_equipment_lookup.py::test_lookup_magic_items PASSED [ 74%]
tests/test_tools/test_equipment_lookup.py::test_lookup_magic_items_by_rarity PASSED [ 74%]
tests/test_tools/test_equipment_lookup.py::test_lookup_magic_items_by_attunement PASSED [ 74%]
tests/test_tools/test_equipment_lookup.py::test_lookup_all_equipment_types PASSED [ 74%]
tests/test_tools/test_equipment_lookup.py::test_lookup_magic_items_empty_results PASSED [ 75%]
tests/test_tools/test_equipment_lookup.py::test_lookup_weapon_by_cost_min PASSED [ 75%]
tests/test_tools/test_equipment_lookup.py::test_lookup_weapon_by_cost_max PASSED [ 75%]
tests/test_tools/test_equipment_lookup.py::test_lookup_armor_by_cost_max PASSED [ 75%]
tests/test_tools/test_equipment_lookup.py::test_lookup_weapon_by_weight_max PASSED [ 76%]
tests/test_tools/test_equipment_lookup.py::test_lookup_weapon_by_is_finesse PASSED [ 76%]
tests/test_tools/test_equipment_lookup.py::test_lookup_weapon_by_is_light PASSED [ 76%]
tests/test_tools/test_equipment_lookup.py::test_lookup_weapon_by_is_magic PASSED [ 76%]
tests/test_tools/test_equipment_lookup.py::test_lookup_weapon_multiple_new_filters PASSED [ 77%]
tests/test_tools/test_equipment_lookup.py::test_lookup_equipment_backward_compatibility_no_new_params PASSED [ 77%]
tests/test_tools/test_integration.py::test_all_tools_registered PASSED   [ 77%]
tests/test_tools/test_integration.py::test_tool_schemas_valid PASSED     [ 77%]
tests/test_tools/test_integration.py::test_spell_lookup_basic PASSED     [ 78%]
tests/test_tools/test_integration.py::test_spell_lookup_by_level PASSED  [ 78%]
tests/test_tools/test_integration.py::test_creature_lookup_basic FAILED  [ 78%]
tests/test_tools/test_integration.py::test_creature_lookup_by_cr FAILED  [ 78%]
tests/test_tools/test_integration.py::test_equipment_lookup_weapons PASSED [ 79%]
tests/test_tools/test_integration.py::test_equipment_lookup_armor PASSED [ 79%]
tests/test_tools/test_integration.py::test_character_option_lookup_class PASSED [ 79%]
tests/test_tools/test_integration.py::test_character_option_lookup_race PASSED [ 79%]
tests/test_tools/test_integration.py::test_rule_lookup_ability_scores_with_cache PASSED [ 80%]
tests/test_tools/test_integration.py::test_rule_lookup_condition PASSED  [ 80%]
tests/test_tools/test_integration.py::test_rule_lookup_damage_type PASSED [ 80%]
tests/test_tools/test_integration.py::test_rule_lookup_skill PASSED      [ 80%]
tests/test_tools/test_integration.py::test_cache_persistence PASSED      [ 81%]
tests/test_tools/test_integration.py::test_cache_filtering PASSED        [ 81%]
tests/test_tools/test_integration.py::test_repository_factory_creates_instances PASSED [ 81%]
tests/test_tools/test_live_mcp.py::TestLiveSpellLookup::test_spell_by_name_found PASSED [ 81%]
tests/test_tools/test_live_mcp.py::TestLiveSpellLookup::test_spell_by_name_not_found PASSED [ 82%]
tests/test_tools/test_live_mcp.py::TestLiveSpellLookup::test_spell_basic_fields_present PASSED [ 82%]
tests/test_tools/test_live_mcp.py::TestLiveSpellLookup::test_spell_filter_by_level PASSED [ 82%]
tests/test_tools/test_live_mcp.py::TestLiveSpellLookup::test_spell_filter_by_school PASSED [ 82%]
tests/test_tools/test_live_mcp.py::TestLiveSpellLookup::test_spell_filter_combined FAILED [ 83%]
tests/test_tools/test_live_mcp.py::TestLiveSpellLookup::test_spell_limit_respected PASSED [ 83%]
tests/test_tools/test_live_mcp.py::TestLiveSpellLookup::test_spell_cache_miss_then_hit PASSED [ 83%]
tests/test_tools/test_live_mcp.py::TestLiveSpellLookup::test_spell_cache_performance PASSED [ 83%]
tests/test_tools/test_live_mcp.py::TestLiveSpellLookup::test_spell_different_queries_different_cache PASSED [ 84%]
tests/test_tools/test_live_mcp.py::TestLiveSpellLookup::test_spell_invalid_school PASSED [ 84%]
tests/test_tools/test_live_mcp.py::TestLiveSpellLookup::test_spell_invalid_limit PASSED [ 84%]
tests/test_tools/test_live_mcp.py::TestLiveSpellLookup::test_spell_empty_results PASSED [ 84%]
tests/test_tools/test_live_mcp.py::TestLiveCreatureLookup::test_creature_by_name_found PASSED [ 85%]
tests/test_tools/test_live_mcp.py::TestLiveCreatureLookup::test_creature_by_name_not_found PASSED [ 85%]
tests/test_tools/test_live_mcp.py::TestLiveCreatureLookup::test_creature_basic_fields_present FAILED [ 85%]
tests/test_tools/test_live_mcp.py::TestLiveCreatureLookup::test_creature_filter_by_cr FAILED [ 85%]
tests/test_tools/test_live_mcp.py::TestLiveCreatureLookup::test_creature_filter_by_type FAILED [ 86%]
tests/test_tools/test_live_mcp.py::TestLiveCreatureLookup::test_creature_filter_by_size FAILED [ 86%]
tests/test_tools/test_live_mcp.py::TestLiveCreatureLookup::test_creature_cache_behavior PASSED [ 86%]
tests/test_tools/test_live_mcp.py::TestLiveCreatureLookup::test_creature_invalid_type FAILED [ 86%]
tests/test_tools/test_live_mcp.py::TestLiveCreatureLookup::test_creature_empty_results PASSED [ 87%]
tests/test_tools/test_live_mcp.py::TestLiveEquipmentLookup::test_equipment_weapon_lookup PASSED [ 87%]
tests/test_tools/test_live_mcp.py::TestLiveEquipmentLookup::test_equipment_armor_lookup PASSED [ 87%]
tests/test_tools/test_live_mcp.py::TestLiveEquipmentLookup::test_equipment_cache_behavior PASSED [ 87%]
tests/test_tools/test_live_mcp.py::TestLiveCharacterOptionLookup::test_character_option_class_lookup PASSED [ 88%]
tests/test_tools/test_live_mcp.py::TestLiveCharacterOptionLookup::test_character_option_race_lookup PASSED [ 88%]
tests/test_tools/test_live_mcp.py::TestLiveCharacterOptionLookup::test_character_option_feat_lookup FAILED [ 88%]
tests/test_tools/test_live_mcp.py::TestLiveRuleLookup::test_rule_condition_lookup PASSED [ 88%]
tests/test_tools/test_live_mcp.py::TestLiveRuleLookup::test_rule_skill_lookup PASSED [ 89%]
tests/test_tools/test_live_mcp.py::TestLiveRuleLookup::test_rule_ability_score_lookup PASSED [ 89%]
tests/test_tools/test_live_mcp.py::TestLiveCacheValidation::test_cache_isolation_across_tools
